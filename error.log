docker ps
CONTAINER ID   IMAGE                              COMMAND                  CREATED         STATUS                     PORTS                                    NAMES
71f8d9846317   local/sam-backend:dev              "uvicorn backend.maiâ€¦"   3 minutes ago   Up 3 minutes (unhealthy)   0.0.0.0:8000->8000/tcp                   compose-backend-1

...

docker logs 71f8d9846317
INFO:     Will watch for changes in these directories: ['/app']
WARNING:  "workers" flag is ignored when reloading is enabled.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [1] using WatchFiles
INFO:     Started server process [8]
INFO:     Waiting for application startup.
2025-09-05 15:50:55,769 - backend.main - INFO - Starting Towerco AIOps Platform...
2025-09-05 15:50:55,769 - core.monitoring - INFO - OpenTelemetry endpoint not configured, using Prometheus only
2025-09-05 15:50:55,770 - core.monitoring - INFO - Custom metrics initialized
2025-09-05 15:50:55,770 - core.monitoring - INFO - Monitoring initialized successfully
2025-09-05 15:50:59,151 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-09-05 15:50:59,151 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-09-05 15:50:59,151 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-09-05 15:50:59,151 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-09-05 15:50:59,164 INFO sqlalchemy.engine.Engine select current_schema()
2025-09-05 15:50:59,164 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-09-05 15:50:59,164 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-09-05 15:50:59,164 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-09-05 15:50:59,173 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-09-05 15:50:59,173 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-09-05 15:50:59,175 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-09-05 15:50:59,175 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-09-05 15:50:59,181 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-09-05 15:50:59,181 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-09-05 15:50:59,183 INFO sqlalchemy.engine.Engine SELECT 1
2025-09-05 15:50:59,183 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-09-05 15:50:59,189 INFO sqlalchemy.engine.Engine [generated in 0.00600s] ()
2025-09-05 15:50:59,189 - sqlalchemy.engine.Engine - INFO - [generated in 0.00600s] ()
2025-09-05 15:50:59,191 INFO sqlalchemy.engine.Engine COMMIT
2025-09-05 15:50:59,191 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-09-05 15:50:59,231 - core.database - INFO - Database connection test successful
2025-09-05 15:50:59,231 - core.database - INFO - Database connections initialized successfully
2025-09-05 15:50:59,235 - core.cache - INFO - Redis connection initialized successfully
2025-09-05 15:51:01,733 - kafka.conn - INFO - <BrokerConnection client_id=towerco_admin, node_id=bootstrap-0 host=kafka:9092 <connecting> [IPv4 ('172.23.0.5', 9092)]>: connecting to kafka:9092 [('172.23.0.5', 9092) IPv4]
2025-09-05 15:51:01,755 - kafka.conn - INFO - <BrokerConnection client_id=towerco_admin, node_id=bootstrap-0 host=kafka:9092 <checking_api_versions_recv> [IPv4 ('172.23.0.5', 9092)]>: Broker version identified as 2.6
2025-09-05 15:51:01,756 - kafka.conn - INFO - <BrokerConnection client_id=towerco_admin, node_id=bootstrap-0 host=kafka:9092 <connected> [IPv4 ('172.23.0.5', 9092)]>: Connection complete.
2025-09-05 15:51:01,777 - kafka.conn - INFO - <BrokerConnection client_id=towerco_admin, node_id=1 host=kafka:9092 <connecting> [IPv4 ('172.23.0.5', 9092)]>: connecting to kafka:9092 [('172.23.0.5', 9092) IPv4]
2025-09-05 15:51:01,778 - kafka.conn - INFO - <BrokerConnection client_id=towerco_admin, node_id=1 host=kafka:9092 <connected> [IPv4 ('172.23.0.5', 9092)]>: Connection complete.
2025-09-05 15:51:01,778 - kafka.conn - INFO - <BrokerConnection client_id=towerco_admin, node_id=bootstrap-0 host=kafka:9092 <connected> [IPv4 ('172.23.0.5', 9092)]>: Closing connection.
2025-09-05 15:51:02,493 - core.messaging - INFO - Kafka topics already exist
2025-09-05 15:51:02,493 - kafka.conn - INFO - <BrokerConnection client_id=towerco_admin, node_id=1 host=kafka:9092 <connected> [IPv4 ('172.23.0.5', 9092)]>: Closing connection.
2025-09-05 15:51:02,493 - core.messaging - INFO - Kafka producer initialized successfully
2025-09-05 15:51:02,493 - core.auth - INFO - Waiting for Keycloak to start...
2025-09-05 15:51:12,677 - core.auth - INFO - Keycloak not ready, attempt 1/60
2025-09-05 15:51:14,678 - core.auth - INFO - Keycloak not ready, attempt 2/60
2025-09-05 15:51:16,681 - core.auth - INFO - Keycloak not ready, attempt 3/60
2025-09-05 15:51:18,802 - core.auth - INFO - Keycloak not ready, attempt 4/60
2025-09-05 15:51:20,811 - core.auth - INFO - Keycloak not ready, attempt 5/60
2025-09-05 15:51:22,830 - core.auth - INFO - Keycloak not ready, attempt 6/60
2025-09-05 15:51:24,840 - core.auth - INFO - Keycloak not ready, attempt 7/60
2025-09-05 15:51:26,851 - core.auth - INFO - Keycloak not ready, attempt 8/60
2025-09-05 15:51:28,927 - core.auth - INFO - Keycloak not ready, attempt 9/60
2025-09-05 15:51:30,928 - core.auth - INFO - Keycloak not ready, attempt 10/60
2025-09-05 15:51:32,971 - core.auth - INFO - Keycloak not ready, attempt 11/60
2025-09-05 15:51:34,976 - core.auth - INFO - Keycloak not ready, attempt 12/60
2025-09-05 15:51:36,978 - core.auth - INFO - Keycloak not ready, attempt 13/60
2025-09-05 15:51:38,983 - core.auth - INFO - Keycloak not ready, attempt 14/60
2025-09-05 15:51:40,984 - core.auth - INFO - Keycloak not ready, attempt 15/60
2025-09-05 15:51:43,008 - core.auth - INFO - Keycloak not ready, attempt 16/60
2025-09-05 15:51:45,009 - core.auth - INFO - Keycloak not ready, attempt 17/60
2025-09-05 15:51:47,014 - core.auth - INFO - Keycloak not ready, attempt 18/60
2025-09-05 15:51:49,042 - core.auth - INFO - Keycloak not ready, attempt 19/60
2025-09-05 15:51:51,122 - core.auth - INFO - Keycloak not ready, attempt 20/60
2025-09-05 15:51:53,243 - core.auth - INFO - Keycloak not ready, attempt 21/60
2025-09-05 15:51:55,538 - core.auth - INFO - Keycloak not ready, attempt 22/60
2025-09-05 15:51:57,588 - core.auth - INFO - Keycloak not ready, attempt 23/60
2025-09-05 15:51:59,591 - core.auth - INFO - Keycloak not ready, attempt 24/60
2025-09-05 15:52:01,598 - core.auth - INFO - Keycloak not ready, attempt 25/60
2025-09-05 15:52:03,602 - core.auth - INFO - Keycloak not ready, attempt 26/60
2025-09-05 15:52:05,605 - core.auth - INFO - Keycloak not ready, attempt 27/60
2025-09-05 15:52:07,616 - core.auth - INFO - Keycloak not ready, attempt 28/60
2025-09-05 15:52:09,638 - core.auth - INFO - Keycloak not ready, attempt 29/60
2025-09-05 15:52:11,640 - core.auth - INFO - Keycloak not ready, attempt 30/60
2025-09-05 15:52:13,659 - core.auth - INFO - Keycloak not ready, attempt 31/60
2025-09-05 15:52:15,663 - core.auth - INFO - Keycloak not ready, attempt 32/60
2025-09-05 15:52:17,671 - core.auth - INFO - Keycloak not ready, attempt 33/60
2025-09-05 15:52:19,680 - core.auth - INFO - Keycloak not ready, attempt 34/60
2025-09-05 15:52:21,690 - core.auth - INFO - Keycloak not ready, attempt 35/60
2025-09-05 15:52:23,693 - core.auth - INFO - Keycloak not ready, attempt 36/60
2025-09-05 15:52:25,704 - core.auth - INFO - Keycloak not ready, attempt 37/60
2025-09-05 15:52:27,709 - core.auth - INFO - Keycloak not ready, attempt 38/60
2025-09-05 15:52:29,717 - core.auth - INFO - Keycloak not ready, attempt 39/60
2025-09-05 15:52:31,721 - core.auth - INFO - Keycloak not ready, attempt 40/60
2025-09-05 15:52:33,741 - core.auth - INFO - Keycloak not ready, attempt 41/60
2025-09-05 15:52:35,754 - core.auth - INFO - Keycloak not ready, attempt 42/60
2025-09-05 15:52:37,770 - core.auth - INFO - Keycloak not ready, attempt 43/60
2025-09-05 15:52:39,772 - core.auth - INFO - Keycloak not ready, attempt 44/60
2025-09-05 15:52:41,777 - core.auth - INFO - Keycloak not ready, attempt 45/60
2025-09-05 15:52:43,821 - core.auth - INFO - Keycloak not ready, attempt 46/60
2025-09-05 15:52:45,920 - core.auth - INFO - Keycloak not ready, attempt 47/60
2025-09-05 15:52:47,954 - core.auth - INFO - Keycloak not ready, attempt 48/60
2025-09-05 15:52:49,960 - core.auth - INFO - Keycloak not ready, attempt 49/60
2025-09-05 15:52:51,967 - core.auth - INFO - Keycloak not ready, attempt 50/60
2025-09-05 15:52:54,005 - core.auth - INFO - Keycloak not ready, attempt 51/60
2025-09-05 15:52:56,133 - core.auth - INFO - Keycloak not ready, attempt 52/60
2025-09-05 15:52:58,250 - core.auth - INFO - Keycloak not ready, attempt 53/60
2025-09-05 15:53:00,261 - core.auth - INFO - Keycloak not ready, attempt 54/60
2025-09-05 15:53:02,263 - core.auth - INFO - Keycloak not ready, attempt 55/60
2025-09-05 15:53:04,282 - core.auth - INFO - Keycloak not ready, attempt 56/60
2025-09-05 15:53:06,392 - core.auth - INFO - Keycloak not ready, attempt 57/60
2025-09-05 15:53:08,398 - core.auth - INFO - Keycloak not ready, attempt 58/60
2025-09-05 15:53:10,430 - core.auth - INFO - Keycloak not ready, attempt 59/60
2025-09-05 15:53:12,438 - core.auth - INFO - Keycloak not ready, attempt 60/60
ERROR:    Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 694, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 134, in merged_lifespan
    async with original_context(app) as maybe_original_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 134, in merged_lifespan
    async with original_context(app) as maybe_original_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 134, in merged_lifespan
    async with original_context(app) as maybe_original_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/backend/main.py", line 51, in lifespan
    await init_auth()
  File "/app/backend/core/auth.py", line 61, in init_auth
    raise RuntimeError("Keycloak not available after maximum retries")
RuntimeError: Keycloak not available after maximum retries

ERROR:    Application startup failed. Exiting.
2025-09-05 15:53:15,080 - asyncio - ERROR - Unclosed AIOKafkaProducer
producer: <aiokafka.producer.producer.AIOKafkaProducer object at 0x7f8ce65c1d90>