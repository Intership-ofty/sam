[+] Running 15/15
 ✔ backend                            Built                                                                                                            0.0s
 ✔ client-portal                      Built                                                                                                            0.0s
 ✔ frontend                           Built                                                                                                            0.0s
 ✔ workers                            Built                                                                                                            0.0s
 ✔ Container compose-frontend-1       Running                                                                                                          0.0s
 ✔ Container compose-prometheus-1     Running                                                                                                          0.0s
 ✔ Container compose-kafka-1          Running                                                                                                          0.0s
 ✔ Container compose-zookeeper-1      Running                                                                                                          0.0s
 ✔ Container compose-postgres-1       Healthy                                                                                                          6.8s
 ✔ Container compose-redis-1          Running                                                                                                          0.0s
 ✔ Container compose-grafana-1        Running                                                                                                          0.0s
 ✔ Container compose-backend-1        Started                                                                                                        137.3s
 ✔ Container keycloak                 Healthy                                                                                                        133.2s
 ✔ Container compose-workers-1        Started                                                                                                        136.5s
 ✔ Container compose-client-portal-1  Started                                                                                                        136.5s
[root@vmi2390455 sam]# docker ps
CONTAINER ID   IMAGE                              COMMAND                  CREATED          STATUS                             PORTS                                    NAMES
5fad77719863   local/sam-backend:dev              "uvicorn backend.mai…"   2 minutes ago    Up 21 seconds (health: starting)   0.0.0.0:8000->8000/tcp                   compose-backend-1
2150f75acea5   quay.io/keycloak/keycloak:22.0.1   "/opt/keycloak/bin/k…"   2 minutes ago    Up 2 minutes (healthy)             8443/tcp, 0.0.0.0:8081->8080/tcp         keycloak
1b689594258a   postgres:16-alpine                 "docker-entrypoint.s…"   47 minutes ago   Up 47 minutes (healthy)            5432/tcp                                 compose-postgres-1
22adefc1a024   local/sam-client-portal:dev        "docker-entrypoint.s…"   11 hours ago     Up 17 seconds                      0.0.0.0:5173->3000/tcp                   compose-client-portal-1
901df4057e94   local/sam-frontend:dev             "python -m http.serv…"   11 hours ago     Up 11 hours                        0.0.0.0:8090->8000/tcp                   compose-frontend-1
7574eb17442a   redis:7-alpine                     "docker-entrypoint.s…"   3 days ago       Up 3 days                          6379/tcp                                 compose-redis-1
e3f29fa6e9fc   bitnami/kafka:3.7                  "/opt/bitnami/script…"   3 days ago       Up 3 days                          9092/tcp                                 compose-kafka-1
ab0561ac4aaa   prom/prometheus:v2.55.0            "/bin/prometheus --c…"   3 days ago       Up 3 days                          0.0.0.0:9090->9090/tcp                   compose-prometheus-1
9be988640eec   bitnami/zookeeper:3.9              "/opt/bitnami/script…"   3 days ago       Up 3 days                          2181/tcp, 2888/tcp, 3888/tcp, 8080/tcp   compose-zookeeper-1
432dbfb07e7e   grafana/grafana:11.1.0             "/run.sh"                3 days ago       Up 3 days                          0.0.0.0:3001->3000/tcp                   compose-grafana-1
101308e7791c   minio/mc:latest                    "/bin/sh -c ' echo '…"   2 weeks ago      Up 2 weeks                                                                  minio-client
9864a7b37372   minio/minio:latest                 "/usr/bin/docker-ent…"   2 weeks ago      Up 2 weeks (healthy)               0.0.0.0:9000-9001->9000-9001/tcp         minio-server
f219b96258b5   txe-web_app                        "docker-entrypoint.s…"   6 weeks ago      Up 6 weeks                         0.0.0.0:3002->3002/tcp                   txe-web_app_1
b76b69afa727   website_app                        "docker-entrypoint.s…"   4 months ago     Up 4 months                        0.0.0.0:3000->3000/tcp                   website_app_1
[root@vmi2390455 sam]# docker ps
CONTAINER ID   IMAGE                              COMMAND                  CREATED          STATUS                          PORTS                                    NAMES
5fad77719863   local/sam-backend:dev              "uvicorn backend.mai…"   3 minutes ago    Up About a minute (unhealthy)   0.0.0.0:8000->8000/tcp                   compose-backend-1
2150f75acea5   quay.io/keycloak/keycloak:22.0.1   "/opt/keycloak/bin/k…"   3 minutes ago    Up 3 minutes (healthy)          8443/tcp, 0.0.0.0:8081->8080/tcp         keycloak
1b689594258a   postgres:16-alpine                 "docker-entrypoint.s…"   48 minutes ago   Up 48 minutes (healthy)         5432/tcp                                 compose-postgres-1
22adefc1a024   local/sam-client-portal:dev        "docker-entrypoint.s…"   11 hours ago     Up About a minute               0.0.0.0:5173->3000/tcp                   compose-client-portal-1
901df4057e94   local/sam-frontend:dev             "python -m http.serv…"   11 hours ago     Up 11 hours                     0.0.0.0:8090->8000/tcp                   compose-frontend-1
7574eb17442a   redis:7-alpine                     "docker-entrypoint.s…"   3 days ago       Up 3 days                       6379/tcp                                 compose-redis-1
e3f29fa6e9fc   bitnami/kafka:3.7                  "/opt/bitnami/script…"   3 days ago       Up 3 days                       9092/tcp                                 compose-kafka-1
ab0561ac4aaa   prom/prometheus:v2.55.0            "/bin/prometheus --c…"   3 days ago       Up 3 days                       0.0.0.0:9090->9090/tcp                   compose-prometheus-1
9be988640eec   bitnami/zookeeper:3.9              "/opt/bitnami/script…"   3 days ago       Up 3 days                       2181/tcp, 2888/tcp, 3888/tcp, 8080/tcp   compose-zookeeper-1
432dbfb07e7e   grafana/grafana:11.1.0             "/run.sh"                3 days ago       Up 3 days                       0.0.0.0:3001->3000/tcp                   compose-grafana-1
101308e7791c   minio/mc:latest                    "/bin/sh -c ' echo '…"   2 weeks ago      Up 2 weeks                                                               minio-client
9864a7b37372   minio/minio:latest                 "/usr/bin/docker-ent…"   2 weeks ago      Up 2 weeks (healthy)            0.0.0.0:9000-9001->9000-9001/tcp         minio-server
f219b96258b5   txe-web_app                        "docker-entrypoint.s…"   6 weeks ago      Up 6 weeks                      0.0.0.0:3002->3002/tcp                   txe-web_app_1
b76b69afa727   website_app                        "docker-entrypoint.s…"   4 months ago     Up 4 months                     0.0.0.0:3000->3000/tcp                   website_app_1
[root@vmi2390455 sam]# docker logs 5fad77719863
INFO:     Will watch for changes in these directories: ['/app']
WARNING:  "workers" flag is ignored when reloading is enabled.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [1] using WatchFiles
INFO:     Started server process [8]
INFO:     Waiting for application startup.
2025-09-01 15:01:39,908 - backend.main - INFO - Starting Towerco AIOps Platform...
2025-09-01 15:01:39,908 - core.monitoring - INFO - OpenTelemetry endpoint not configured, using Prometheus only
2025-09-01 15:01:39,908 - core.monitoring - INFO - Custom metrics initialized
2025-09-01 15:01:39,908 - core.monitoring - INFO - Monitoring initialized successfully
2025-09-01 15:01:41,563 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-09-01 15:01:41,563 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-09-01 15:01:41,563 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2025-09-01 15:01:41,563 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-09-01 15:01:41,609 INFO sqlalchemy.engine.Engine select current_schema()
2025-09-01 15:01:41,610 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-09-01 15:01:41,609 - sqlalchemy.engine.Engine - INFO - select current_schema()
2025-09-01 15:01:41,610 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-09-01 15:01:41,661 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-09-01 15:01:41,661 INFO sqlalchemy.engine.Engine [raw sql] ()
2025-09-01 15:01:41,661 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2025-09-01 15:01:41,661 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-09-01 15:01:41,704 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-09-01 15:01:41,704 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-09-01 15:01:41,725 INFO sqlalchemy.engine.Engine SELECT 1
2025-09-01 15:01:41,730 INFO sqlalchemy.engine.Engine [generated in 0.00604s] ()
2025-09-01 15:01:41,725 - sqlalchemy.engine.Engine - INFO - SELECT 1
2025-09-01 15:01:41,730 - sqlalchemy.engine.Engine - INFO - [generated in 0.00604s] ()
2025-09-01 15:01:41,758 INFO sqlalchemy.engine.Engine COMMIT
2025-09-01 15:01:41,758 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-09-01 15:01:42,088 - core.database - INFO - Database connection test successful
2025-09-01 15:01:42,113 - core.database - INFO - Database connections initialized successfully
2025-09-01 15:01:42,171 - core.cache - INFO - Redis connection initialized successfully
2025-09-01 15:01:43,555 - kafka.conn - INFO - <BrokerConnection client_id=towerco_admin, node_id=bootstrap-0 host=kafka:9092 <connecting> [IPv4 ('172.23.0.2', 9092)]>: connecting to kafka:9092 [('172.23.0.2', 9092) IPv4]
2025-09-01 15:01:43,602 - kafka.conn - INFO - <BrokerConnection client_id=towerco_admin, node_id=bootstrap-0 host=kafka:9092 <checking_api_versions_recv> [IPv4 ('172.23.0.2', 9092)]>: Broker version identified as 2.6
2025-09-01 15:01:43,602 - kafka.conn - INFO - <BrokerConnection client_id=towerco_admin, node_id=bootstrap-0 host=kafka:9092 <connected> [IPv4 ('172.23.0.2', 9092)]>: Connection complete.
2025-09-01 15:01:43,657 - kafka.conn - INFO - <BrokerConnection client_id=towerco_admin, node_id=1 host=kafka:9092 <connecting> [IPv4 ('172.23.0.2', 9092)]>: connecting to kafka:9092 [('172.23.0.2', 9092) IPv4]
2025-09-01 15:01:43,662 - kafka.conn - INFO - <BrokerConnection client_id=towerco_admin, node_id=1 host=kafka:9092 <connected> [IPv4 ('172.23.0.2', 9092)]>: Connection complete.
2025-09-01 15:01:43,662 - kafka.conn - INFO - <BrokerConnection client_id=towerco_admin, node_id=bootstrap-0 host=kafka:9092 <connected> [IPv4 ('172.23.0.2', 9092)]>: Closing connection.
2025-09-01 15:01:45,448 - core.messaging - INFO - Kafka topics created successfully
2025-09-01 15:01:45,448 - kafka.conn - INFO - <BrokerConnection client_id=towerco_admin, node_id=1 host=kafka:9092 <connected> [IPv4 ('172.23.0.2', 9092)]>: Closing connection.
2025-09-01 15:01:45,448 - core.messaging - INFO - Kafka producer initialized successfully
2025-09-01 15:01:46,664 - core.auth - ERROR - Keycloak connection test failed: 404: b'{"error":"Realm does not exist"}'
2025-09-01 15:01:46,664 - core.auth - ERROR - Failed to initialize Keycloak: 404: b'{"error":"Realm does not exist"}'
ERROR:    Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 694, in lifespan
    async with self.lifespan_context(app) as maybe_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 134, in merged_lifespan
    async with original_context(app) as maybe_original_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 134, in merged_lifespan
    async with original_context(app) as maybe_original_state:
  File "/usr/local/lib/python3.11/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/backend/main.py", line 50, in lifespan
    await init_auth()
  File "/app/backend/core/auth.py", line 53, in init_auth
    await test_keycloak_connection()
  File "/app/backend/core/auth.py", line 67, in test_keycloak_connection
    config = keycloak_openid.well_known()
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/keycloak/keycloak_openid.py", line 277, in well_known
    return raise_error_from_response(data_raw, KeycloakGetError)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/keycloak/exceptions.py", line 195, in raise_error_from_response
    raise error(
keycloak.exceptions.KeycloakGetError: 404: b'{"error":"Realm does not exist"}'

ERROR:    Application startup failed. Exiting.
2025-09-01 15:01:47,660 - asyncio - ERROR - Unclosed AIOKafkaProducer
producer: <aiokafka.producer.producer.AIOKafkaProducer object at 0x7f59f1e35450>